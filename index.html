<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Boards and Battles - Magical Chess</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=Playfair+Display:wght@700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="app.css?v=1758980769" />
  </head>
  <body>
    <div class="container">
      <div class="title">
        <h1>Boards and Battles</h1>
        <p class="subtitle">A Magical Chess Experience</p>
      </div>
      
      <div class="game-area">
        <div class="board-section">
          <div class="current-player" role="status" aria-live="polite">
            Current Player: <span id="currentPlayer">White</span>
          </div>
          <div class="chess-board-wrapper">
            <div class="board-coordinates">
              <div class="coords-row coords-letters">
                <span></span>
                <span>A</span><span>B</span><span>C</span><span>D</span><span>E</span><span>F</span><span>G</span><span>H</span>
              </div>
              <div class="board-with-coords">
                <div class="coords-col coords-numbers">
                  <span>8</span><span>7</span><span>6</span><span>5</span><span>4</span><span>3</span><span>2</span><span>1</span>
                </div>
                <div class="chess-board" id="chessBoard" role="grid" aria-label="Chess board"></div>
                <div class="coords-col coords-numbers">
                  <span>8</span><span>7</span><span>6</span><span>5</span><span>4</span><span>3</span><span>2</span><span>1</span>
                </div>
              </div>
              <div class="coords-row coords-letters">
                <span></span>
                <span>A</span><span>B</span><span>C</span><span>D</span><span>E</span><span>F</span><span>G</span><span>H</span>
              </div>
            </div>
          </div>
          <div id="gameStatus" role="status" aria-live="polite"></div>
          <div class="game-controls">
            <div class="turn-phase" role="status" aria-live="polite">
              <span class="phase-label">Phase:</span> <span id="turnPhase" class="phase-value">Move</span>
            </div>
            <div class="dice-result" id="diceResult" role="status" aria-live="polite"></div>
            <div class="button-row">
              <button id="rollDiceButton" aria-label="Roll dice to use spells or items">Roll Dice</button>
              <button id="resetButton" aria-label="Reset game to starting position">Reset Game</button>
            </div>
            <div class="button-row">
              <button id="skipTurnButton" aria-label="Skip current phase">Skip Phase</button>
              <button id="endTurnButton" aria-label="End turn and switch players">End Turn</button>
            </div>
          </div>
          <div class="move-history-section">
            <h4>Recent Moves</h4>
            <div id="moveHistory" class="move-history" role="log" aria-live="polite" aria-label="Move history"></div>
          </div>
        </div>

        <div class="magical-section">
          <!-- Graveyard Display - Moved Up -->
          <div class="graveyard-section">
            <h3>Graveyard</h3>
            <div class="graveyard-display">
              <div class="graveyard-player">
                <h4>White's Graveyard</h4>
                <div id="whiteGraveyard" class="graveyard-pieces"></div>
              </div>
              <div class="graveyard-player">
                <h4>Black's Graveyard</h4>
                <div id="blackGraveyard" class="graveyard-pieces"></div>
              </div>
            </div>
          </div>
          
          <!-- Enhanced Effects Display -->
          <div class="effects-display">
            <h3>Active Effects</h3>
            <div id="activeEffectsList" class="effects-list"></div>
          </div>
          
          <!-- Spells Dropdown -->
          <div class="dropdown-section">
            <div class="dropdown-header" id="spellsDropdownHeader">
              <h3>Spells</h3>
              <span class="dropdown-arrow">▼</span>
            </div>
            <div class="dropdown-content" id="spellsDropdownContent">
              <div class="spells-grid" id="spellsGrid" role="list" aria-label="Available spells"></div>
              <div class="spell-usage">
                <button id="useSpellButton" disabled aria-label="Use selected spell">Use Selected Spell <span class="keyboard-hint">(S)</span></button>
                <div id="spellResult" class="spell-result" role="status" aria-live="polite"></div>
              </div>
            </div>
          </div>
          
          <!-- Items Dropdown -->
          <div class="dropdown-section">
            <div class="dropdown-header" id="itemsDropdownHeader">
              <h3>Items</h3>
              <span class="dropdown-arrow">▼</span>
            </div>
            <div class="dropdown-content" id="itemsDropdownContent">
              <div class="items-grid" id="itemsGrid" role="list" aria-label="Available items"></div>
              <div class="item-usage">
                <button id="useItemButton" disabled aria-label="Use selected item">Use Selected Item <span class="keyboard-hint">(I)</span></button>
                <div id="itemResult" class="item-result" role="status" aria-live="polite"></div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="rules">
        <div class="rules-header" id="rulesHeader">
          <h3>Game Rules</h3>
          <span class="rules-toggle">▼</span>
        </div>
        <div class="rules-content" id="rulesContent">
          <h4>Chess Rules:</h4>
          <ul>
            <li>Standard chess piece movement</li>
            <li>Capture the opponent's king to win</li>
            <li>Check and checkmate rules apply</li>
          </ul>
          
          <h4>Magical Rules:</h4>
          <ul>
            <li>Roll dice to use spells (5-17+ required)</li>
            <li>Spells can only be used by the king</li>
            <li>Items can be used by any piece</li>
            <li>Up to 3 spells or items per turn</li>
            <li>Spells can't kill the king</li>
            <li>King can't be revived</li>
          </ul>
          
          <h4>How to Use Spells/Items:</h4>
          <ul>
            <li>1. Roll dice first</li>
            <li>2. Click on a spell or item to select it</li>
            <li>3. Click "Use Selected Spell/Item" or press <kbd>S</kbd>/<kbd>I</kbd></li>
            <li>4. Watch the effects display for active timers</li>
          </ul>
          <h4>Keyboard Shortcuts:</h4>
          <ul>
            <li><kbd>S</kbd> - Use selected spell</li>
            <li><kbd>I</kbd> - Use selected item</li>
            <li><kbd>R</kbd> - Roll dice</li>
            <li><kbd>Esc</kbd> - Deselect piece/spell/item</li>
          </ul>
        </div>
      </div>
    </div>
    <script src="app.js?v=1758980700"></script>
  </body>
</html>
